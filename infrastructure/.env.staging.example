# ============================================================================
# DeepAgents Control Platform - Staging Environment Configuration
# ============================================================================
# Copy this file to .env.staging and update with your staging values
# This environment is for pre-production testing and validation

# ============================================================================
# Application Settings
# ============================================================================
ENVIRONMENT=staging
LOG_LEVEL=DEBUG
DEBUG=True

# ============================================================================
# PostgreSQL Database Configuration
# ============================================================================
POSTGRES_DB=deepagents_staging
POSTGRES_USER=deepagents_staging
# SECURITY: Generate a strong password (different from production!)
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=your_staging_db_password_here

# External port mapping (to avoid conflicts with production)
POSTGRES_PORT=5433

# ============================================================================
# Redis Configuration
# ============================================================================
# External port mapping (to avoid conflicts with production)
REDIS_PORT=6380

# ============================================================================
# Security Configuration
# ============================================================================
# SECURITY: Generate a unique secret key (different from production!)
# Generate with: openssl rand -hex 32
SECRET_KEY=your_staging_secret_key_here

# JWT token expiration (longer in staging for testing)
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ============================================================================
# API Keys
# ============================================================================
# You can use the same API keys as production or create staging-specific ones
# with rate limits to avoid excessive costs during testing

# Anthropic API Key (required)
ANTHROPIC_API_KEY=sk-ant-your-staging-key-here

# OpenAI API Key (optional)
OPENAI_API_KEY=sk-your-staging-openai-key-here

# ============================================================================
# CORS Configuration
# ============================================================================
# Comma-separated list of allowed origins
# Include staging domain and localhost for development testing
ALLOWED_ORIGINS=https://staging.yourdomain.com,http://localhost:3000,http://localhost:8080,http://localhost:8081

# ============================================================================
# Backend Configuration
# ============================================================================
# External port for backend API
BACKEND_PORT=8080

# Number of Uvicorn workers (fewer than production)
BACKEND_WORKERS=2

# Database connection pool settings (smaller than production)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=5

# Enable detailed query logging for debugging
ENABLE_QUERY_LOGGING=True

# ============================================================================
# Frontend Configuration
# ============================================================================
# API URL for frontend (adjust based on your staging setup)
REACT_APP_API_URL=http://localhost:8080/api
REACT_APP_WS_URL=ws://localhost:8080/api

# For deployed staging environment, use:
# REACT_APP_API_URL=https://staging.yourdomain.com/api
# REACT_APP_WS_URL=wss://staging.yourdomain.com/api

# ============================================================================
# Nginx Configuration
# ============================================================================
# External HTTP port (to avoid conflicts with production)
NGINX_HTTP_PORT=8081

# External HTTPS port (to avoid conflicts with production)
NGINX_HTTPS_PORT=8444

# ============================================================================
# Feature Flags (Staging-specific)
# ============================================================================
# Enable features under development for testing
ENABLE_EXPERIMENTAL_FEATURES=True

# Enable detailed error messages (should be disabled in production)
SHOW_DETAILED_ERRORS=True

# Enable performance profiling
ENABLE_PROFILING=True

# ============================================================================
# Monitoring and Logging
# ============================================================================
# Sentry DSN for error tracking (optional, can be same as prod or separate)
# SENTRY_DSN=https://your-sentry-dsn-here

# Sentry environment tag
# SENTRY_ENVIRONMENT=staging

# Log retention in days
LOG_RETENTION_DAYS=7

# ============================================================================
# Email Configuration (for notifications)
# ============================================================================
# SMTP settings for staging notifications
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=staging@yourdomain.com
# SMTP_PASSWORD=your_smtp_password
# SMTP_FROM=staging@yourdomain.com

# ============================================================================
# Backup Configuration
# ============================================================================
# S3 bucket for staging backups (separate from production)
# S3_BACKUP_BUCKET=deepagents-staging-backups
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1

# Backup retention (shorter than production)
BACKUP_RETENTION_DAYS=7

# ============================================================================
# Resource Limits
# ============================================================================
# Maximum request size (MB)
MAX_REQUEST_SIZE=50

# Request timeout (seconds) - longer in staging for debugging
REQUEST_TIMEOUT=120

# Maximum concurrent requests
MAX_CONCURRENT_REQUESTS=50

# ============================================================================
# Testing Configuration
# ============================================================================
# Seed data on startup (useful for testing)
SEED_TEST_DATA=True

# Number of test agents to create
TEST_AGENTS_COUNT=5

# Number of test users to create
TEST_USERS_COUNT=3

# ============================================================================
# Notes
# ============================================================================
# 1. This is a STAGING environment - it's OK to have debug mode enabled
# 2. Use separate database and Redis instances from production
# 3. Port mappings are offset to allow running alongside production
# 4. Resource limits are lower than production
# 5. Longer token expiration is acceptable for testing
# 6. Test data seeding is enabled by default
# 7. Detailed logging and error messages are enabled for debugging
