# DeepAgents Control Platform - Production Environment Configuration
# IMPORTANT: This is a production template with security best practices
# Copy this file to .env in production and update all values

# ============================================================================
# Application Settings
# ============================================================================
PROJECT_NAME="DeepAgents Control Platform"
VERSION="1.0.0"
API_V1_STR="/api/v1"
ENVIRONMENT="production"

# ============================================================================
# Database Configuration - PostgreSQL with SSL/TLS (REQUIRED)
# ============================================================================
# CRITICAL: Production databases MUST use SSL/TLS encryption
# Use sslmode=require (minimum) or sslmode=verify-full (recommended)
#
# Format: postgresql+asyncpg://user:password@host:port/database?sslmode=verify-full
#
# SSL Modes (in order of security):
#   verify-full (RECOMMENDED): Verify server cert AND hostname
#   verify-ca:                 Verify server cert against CA
#   require:                   SSL required but no cert validation
#   prefer:                    Try SSL, fallback to plain (NOT RECOMMENDED)
#   disable:                   No SSL (NEVER USE IN PRODUCTION)
#
# Example with SSL (replace with your values):
DATABASE_URL=postgresql+asyncpg://dbuser:SECURE_PASSWORD@db.example.com:5432/deepagents_prod?sslmode=verify-full

# If using custom CA certificate:
# DATABASE_URL=postgresql+asyncpg://dbuser:PASSWORD@host:5432/db?sslmode=verify-full&sslrootcert=/path/to/ca-cert.pem

# Connection Pool Settings (already configured in code):
# - pool_size=20 (base connections)
# - max_overflow=40 (burst capacity)
# - pool_recycle=3600 (recycle after 1 hour)

# ============================================================================
# Redis Configuration - With Password and Optional SSL (REQUIRED)
# ============================================================================
# CRITICAL: Production Redis MUST use password authentication
# Recommended: Also enable SSL/TLS for remote/cloud Redis

# Option 1: Redis with password (no SSL - only for local/trusted network)
# REDIS_URL=redis://:STRONG_REDIS_PASSWORD@localhost:6379

# Option 2: Redis with password and SSL/TLS (RECOMMENDED for cloud/remote)
REDIS_URL=rediss://:STRONG_REDIS_PASSWORD@redis.example.com:6380
# Note: 'rediss://' (with double 's') enables SSL/TLS

# For Redis Cluster or Sentinel (high availability):
# REDIS_URL=redis+sentinel://:PASSWORD@sentinel1:26379,sentinel2:26379,sentinel3:26379/mymaster

# ============================================================================
# Security Configuration - Secrets and Keys (CRITICAL)
# ============================================================================

# JWT Secret Key (REQUIRED - minimum 64 characters recommended for production)
# Generate with: openssl rand -hex 64
# NEVER commit this to version control!
SECRET_KEY=REPLACE_WITH_128_CHAR_RANDOM_HEX_STRING_GENERATED_WITH_OPENSSL

# JWT Algorithm and Expiration
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Credential Encryption Key for External Tools (REQUIRED)
# Generate with: python -c 'from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())'
CREDENTIAL_ENCRYPTION_KEY=REPLACE_WITH_FERNET_KEY_FROM_GENERATION_COMMAND

# ============================================================================
# CORS Configuration
# ============================================================================
# Comma-separated list of allowed origins (no trailing slashes)
# CRITICAL: Only list trusted frontend domains
CORS_ORIGINS_STR=https://app.example.com,https://dashboard.example.com

# ============================================================================
# External API Keys (Optional but recommended for full functionality)
# ============================================================================

# Anthropic API Key for Claude models
ANTHROPIC_API_KEY=sk-ant-api03-REPLACE_WITH_YOUR_ANTHROPIC_API_KEY

# OpenAI API Key for GPT models
OPENAI_API_KEY=sk-REPLACE_WITH_YOUR_OPENAI_API_KEY

# ============================================================================
# Logging and Monitoring (Optional but recommended)
# ============================================================================

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Sentry DSN for error tracking (highly recommended for production)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================================================
# Production Checklist
# ============================================================================
# Before deploying to production, ensure:
# [ ] DATABASE_URL uses sslmode=verify-full or sslmode=require
# [ ] REDIS_URL includes strong password (rediss:// for SSL recommended)
# [ ] SECRET_KEY is 64+ random characters (generated with openssl)
# [ ] CREDENTIAL_ENCRYPTION_KEY is generated with Fernet
# [ ] CORS_ORIGINS_STR only lists production frontend domains
# [ ] All API keys are production keys (not development/test keys)
# [ ] ENVIRONMENT is set to "production"
# [ ] LOG_LEVEL is set to INFO or WARNING (not DEBUG)
# [ ] Error tracking (Sentry) is configured
# [ ] Secrets are managed via environment variables or secret manager (not .env file in repo)
# [ ] Database user has minimum required permissions (not superuser)
# [ ] Redis requirepass is enabled in redis.conf
# [ ] Firewall rules limit database/redis access to application servers only
# [ ] SSL/TLS certificates are valid and not self-signed
# [ ] Backup and recovery procedures are tested
